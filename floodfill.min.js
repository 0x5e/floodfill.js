var floodfill=(function(){function e(o,u,t,k,s,f,A){var h=o.length;var p=[];var n=(u+t*f)*4;var q=n,v=n,r,z,m=f*4;var g=[o[n],o[n+1],o[n+2],o[n+3]];if(!a(n,g,k,o,h,s)){return false}p.push(n);while(p.length){n=p.pop();if(d(n,g,k,o,h,s)){q=n;v=n;z=parseInt(n/m)*m;r=z+m;while(z<v&&z<(v-=4)&&d(v,g,k,o,h,s)){}while(r>q&&r>(q+=4)&&d(q,g,k,o,h,s)){}for(var l=v;l<q;l+=4){if(l-m>=0&&a(l-m,g,k,o,h,s)){p.push(l-m)}if(l+m<h&&a(l+m,g,k,o,h,s)){p.push(l+m)}}}}return o}function a(h,k,g,l,j,f){if(h<0||h>=j){return false}if(l[h+3]===0&&g.a>0){return true}if((k[3]===g.a)&&(k[0]===g.r)&&(k[1]===g.g)&&(k[2]===g.b)){return false}if((k[3]===l[h+3])&&(k[0]===l[h])&&(k[1]===l[h+1])&&(k[2]===l[h+2])){return true}if(Math.abs(k[3]-l[h+3])<=(255-f)&&Math.abs(k[0]-l[h])<=f&&Math.abs(k[1]-l[h+1])<=f&&Math.abs(k[2]-l[h+2])<=f){return true}return false}function d(h,k,g,l,j,f){if(a(h,k,g,l,j,f)){l[h]=g.r;l[h+1]=g.g;l[h+2]=g.b;l[h+3]=g.a;return true}return false}function b(l,g,m,i,h,j,f){if(!l instanceof Uint8ClampedArray){throw new Error("data must be an instance of Uint8ClampedArray")}if(isNaN(j)){throw new Error("argument 'width' must be a positive integer")}if(isNaN(f)){throw new Error("argument 'height' must be a positive integer")}if(isNaN(g)){throw new Error("argument 'x' must be a positive integer")}if(isNaN(m)){throw new Error("argument 'y' must be a positive integer")}var k=l.length;h=(!isNaN(h))?Math.min(Math.abs(h),254):0;return e(l,g,m,i,h,j,f)}function c(o,m,j,l,h,n,p,f){var r=this;h=(isNaN(h))?0:h;n=(isNaN(n))?0:n;p=(!isNaN(p)&&p)?Math.min(Math.abs(p),r.canvas.width):r.canvas.width;f=(!isNaN(f)&&f)?Math.min(Math.abs(f),r.canvas.height):r.canvas.height;var i=r.getImageData(h,n,p,f);var k=i.data;var g=i.width;var q=i.height;if(g>0&&q>0){b(k,o,m,j,l,g,q);r.putImageData(i,0,0)}}CanvasRenderingContext2D.prototype.floodfill=c;return b})();