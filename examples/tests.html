<!doctype html>
<html>
<head>
    <title>floodfill.js</title>
    <style>
        .border {border:1px solid #ccc;}
        td {width:400px;border-bottom:1px solid #eee;border-top:1px solid #eee;}
    </style>
</head>
<body>
    
    <table>
        <tr>
            <td>
                <h2>Circle Before</h2>
                <img id="image_circle" src="circle.png" class="border" />
            </td><td>
                <h2>Circle After</h2>
                <canvas id="canvas_circle" width="128" height="128" class="border"></canvas>
            </td>
        </tr>
        <tr>
            <td>
                <h2>Circle Spec Before</h2>
                <img id="image_circle_spec" src="circle.png" class="border" />
            </td><td>
                <h2>Circle Spec After</h2>
                <canvas id="canvas_circle_spec" width="128" height="128" class="border"></canvas>
            </td>
        </tr>
        <tr>
            <td>
                <h2>Star Before</h2>
                <img id="image_star" src="star.png" class="border" />
            </td><td>
                <h2>Fill partial background</h2>
                <canvas id="canvas_star" width="128" height="128" class="border"></canvas>
            </td>
        </tr>
        <tr>
            <td>
                <h2>Circle Before Clear</h2>
                <img id="image_circle_clear" src="circle.png" class="border" />
            </td><td>
                <h2>Circle After Clear</h2>
                <canvas id="canvas_circle_clear" width="128" height="128" class="border"></canvas>
            </td>
        </tr>
        <tr>
            <td>
                <h2>Circle Before Tolerance</h2>
                <img id="image_circle_tolerance" src="circle.png" class="border" />
            </td><td>
                <h2>Circle After Tolerance</h2>
                <canvas id="canvas_circle_tolerance" width="128" height="128" class="border"></canvas>
            </td>
        </tr>
    </table>

    <script type="text/javascript">
        <!--
        (function(){
            var min = window.location.search.indexOf("min=1")>=0;
            var scr = min?'../floodfill.min.js':'../floodfill.js';
            var str = '<script type="text/javascript" src="'+scr+'"></script>';
            document.write(str);
        })();
        //-->
    </script>

    <script type="text/javascript">
        
        //Circle default fill
        var circle = document.getElementById('image_circle');
        circle.onload = function() {

            // Create a canvas with which we can edit an image
            var canvas = document.getElementById('canvas_circle');
            var context = canvas.getContext('2d');
            context.drawImage(circle, 0, 0);

            // Flood fill the circle starting at point (50, 75) using the color red (255, 0, 0)
            var color = { r: 255, g: 0, b: 0, a: 255 };
            context.floodfill(50, 75, color);

        }
        
        //Circle spec fill
        var circle = document.getElementById('image_circle_spec');
        circle.onload = function() {

            // Create a canvas with which we can edit an image
            var canvas = document.getElementById('canvas_circle_spec');
            var context = canvas.getContext('2d');
            context.drawImage(circle, 0, 0);

            // Flood fill the circle starting at point (50, 75) using the color red (255, 0, 0)
            var color = { r: 255, g: 0, b: 0, a: 255 };
            context.floodfill(50, 75, color, 128, 0, 0, circle.width, circle.height);

        }


        //Star boundary fill
        var star = document.getElementById('image_star');
        star.onload = function() {

            // Create a canvas with which we can edit an image
            var canvas = document.getElementById('canvas_star');
            var context = canvas.getContext('2d');
            context.drawImage(star, 0, 0);

            // Flood fill the star starting at point (5, 5) using the color red (255, 0, 0)
            var color = { r: 255, g: 0, b: 0, a: 255 };
            context.floodfill(5, 5, color, 0, 0, 0, star.width, star.height);

        }

        //Circle Clear
        var circle_clear = document.getElementById('image_circle_clear');
        circle_clear.onload = function() {

            // Create a canvas with which we can edit an image
            var canvas = document.getElementById('canvas_circle_clear');
            var context = canvas.getContext('2d');
            context.drawImage(circle_clear, 0, 0);

            // Flood fill the circle starting at point (50, 75) using the color red (255, 0, 0)
            var color = { r: 255, g: 0, b: 0, a: 255 };
            context.floodfill(50, 75, color);


            // Flood fill the circle_clear starting at point (50, 75) using the color red (255, 0, 0)
            var clear = { r: 0, g: 0, b: 0, a: 0 };
            context.floodfill(50, 75, clear);

        }

        //Circle Clear
        var circle_tolerance = document.getElementById('image_circle_tolerance');
        circle_tolerance.onload = function() {

            // Create a canvas with which we can edit an image
            var canvas = document.getElementById('canvas_circle_tolerance');
            var context = canvas.getContext('2d');
            context.drawImage(circle_tolerance, 0, 0);
           
            // Test various tolerance levels 
            var color1 = { r: 255, g: 0, b: 0, a: 255 };
            context.floodfill(50, 75, color1, 255, 0, 0, circle_tolerance.width, circle_tolerance.height);
            
            var color2 = { r: 0, g: 255, b: 0, a: 255 };
            context.floodfill(50, 75, color2, 0, 0, 0, circle_tolerance.width, circle_tolerance.height);
            
            var color3 = { r: 0, g: 0, b: 255, a: 255 };
            context.floodfill(50, 75, color3, -999, 0, 0, circle_tolerance.width, circle_tolerance.height);
            
            var color4 = { r: 255, g: 255, b: 0, a: 255 };
            context.floodfill(50, 75, color4, null, 0, 0, circle_tolerance.width, circle_tolerance.height);
            
            var color5 = { r: 255, g: 255, b: 255, a: 255 };
            context.floodfill(50, 75, color5, '123', 0, 0, circle_tolerance.width, circle_tolerance.height);

        }
        

    </script>
</body>
</html>
